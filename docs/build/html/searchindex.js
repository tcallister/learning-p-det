Search.setIndex({"docnames": ["draw_new_injections", "getting-started", "hierarchical-inference", "index", "making-figures", "modules", "training-the-network"], "filenames": ["draw_new_injections.rst", "getting-started.rst", "hierarchical-inference.rst", "index.rst", "making-figures.rst", "modules.rst", "training-the-network.rst"], "titles": ["draw_new_injections module", "Getting started", "Hierarchical Inference", "Welcome to learning-p-det\u2019s documentation!", "Figure generation", "Modules", "Training the network"], "terms": {"batch_siz": 0, "1000": 0, "min_m1": 0, "2": [0, 1], "0": [0, 1, 6], "max_m1": 0, "100": 0, "alpha_m1": 0, "35": 0, "min_m2": 0, "max_m2": 0, "alpha_m2": 0, "1": [0, 1], "max_a1": 0, "998": 0, "max_a2": 0, "zmax": 0, "9": 0, "kappa": 0, "conditional_mass": 0, "fals": 0, "sourc": [0, 1, 3, 6], "function": [0, 2, 3, 6], "draw": [0, 2], "new": [0, 1, 2], "propos": 0, "inject": [0, 6], "paramet": [0, 2, 3, 6], "note": [0, 2], "o3b": 0, "distribut": [0, 6], "ar": [0, 3, 6], "describ": [0, 6], "http": [0, 1, 3, 6], "zenodo": [0, 3, 4, 6], "org": [0, 1, 3, 6], "record": [0, 6], "5546676": 0, "float": 0, "minimum": 0, "frame": 0, "primari": 0, "mass": 0, "maximum": 0, "power": 0, "law": 0, "index": 0, "secondari": 0, "spin": 0, "magnitud": [0, 2], "redshift": 0, "govern": 0, "evolut": 0, "merger": 0, "rate": [0, 2], "bool": 0, "If": [0, 1], "true": 0, "i": [0, 1, 2, 3, 6], "normal": 0, "rang": 0, "m1": 0, "follow": [0, 1, 2, 6], "convent": 0, "adopt": 0, "bbh": [0, 6], "result": [0, 1, 2, 3, 6], "reject": 0, "sampl": [0, 2], "enforc": 0, "m2": 0, "bn": [0, 6], "nsbh": [0, 6], "o3": [0, 3], "default": 0, "return": 0, "panda": 0, "datafram": 0, "dictionari": [0, 2, 6], "contain": [0, 1, 2, 4, 6], "randomli": [0, 3], "drawn": 0, "compon": 0, "cartesian": 0, "sky": 0, "posit": 0, "orient": 0, "distanc": 0, "time": [0, 6], "gen_found_inject": 0, "p_det_emul": 0, "addderived_func": 0, "feature_nam": 0, "scaler": 0, "ntotal": 0, "pop": 0, "verbos": 0, "jit": 0, "gener": [0, 3, 6], "set": [0, 6], "found": [0, 6], "from": [0, 4, 6], "cbc": [0, 6], "label": [0, 6], "accord": 0, "our": [0, 1, 3, 4, 6], "neural": [0, 1, 3, 6], "network": [0, 1, 3], "p_det": 0, "emul": [0, 2, 3, 6], "tf": 0, "kera": 0, "model": [0, 6], "sequenti": 0, "annaverag": 0, "The": [0, 1, 2, 3, 4, 6], "list": [0, 4, 6], "us": [0, 1, 2, 3, 6], "predict": [0, 6], "func": 0, "serv": [0, 6], "add": 0, "ani": [0, 4], "addit": [0, 1], "requir": [0, 1, 6], "deriv": 0, "should": 0, "modifi": 0, "place": [0, 1], "featur": 0, "name": [0, 1, 6], "expect": 0, "correspond": [0, 4], "column": 0, "nativ": 0, "ad": 0, "sklearn": [0, 6], "preprocess": [0, 6], "standardscal": [0, 6], "quantiletransform": 0, "appli": 0, "extract": [0, 2], "int": 0, "total": 0, "number": [0, 6], "request": 0, "size": 0, "individu": [0, 6], "batch": [0, 6], "which": [0, 1, 2, 3, 6], "evalu": 0, "string": 0, "dict": 0, "each": [0, 6], "class": [0, 6], "document": [0, 2], "user": 0, "specifi": [0, 6], "inform": [0, 6], "print": [0, 6], "screen": 0, "all_found": 0, "ntrial": 0, "order": [0, 2], "yield": [0, 2], "To": [1, 4, 6], "make": [1, 4], "easi": 1, "possibl": 1, "reproduc": [1, 3, 4], "figur": [1, 3, 6], "yml": [1, 2, 6], "file": [1, 2, 4, 6], "can": [1, 2, 3, 6], "build": [1, 2], "conda": [1, 2, 4, 6], "packag": 1, "need": [1, 2, 6], "run": [1, 2, 3, 4, 6], "code": [1, 2, 3, 6], "thi": [1, 2, 3, 4, 6], "repositori": [1, 6], "do": [1, 6], "step": [1, 2], "sure": [1, 4], "you": [1, 2, 4, 6], "have": [1, 4], "instal": [1, 6], "see": [1, 2, 4, 6], "e": 1, "g": 1, "doc": 1, "io": 1, "en": 1, "latest": 1, "miniconda": 1, "html": 1, "env": 1, "creat": [1, 2, 6], "f": 1, "learn": [1, 2, 4, 6], "p": [1, 2, 4, 6], "det": [1, 2, 4, 6], "activ": [1, 2, 4, 6], "deactiv": 1, "an": [1, 6], "environment_midwai": [1, 2], "similarli": 1, "midwai": 1, "specif": [1, 2, 3, 6], "gpu": [1, 2, 6], "compat": [1, 6], "jax": 1, "numpyro": [1, 2], "we": [1, 2, 3, 6], "strongli": [1, 6], "recommend": [1, 6], "when": [1, 2, 6], "perform": 1, "hierarch": [1, 3], "infer": [1, 3], "although": [1, 6], "suitabl": 1, "univers": [1, 2], "chicago": [1, 2], "": [1, 2], "midway3": [1, 2, 6], "cluster": [1, 2, 6], "mai": [1, 2], "work": [1, 2, 3, 6], "differ": [1, 6], "comput": [1, 2, 6], "resourc": 1, "3": 1, "final": [1, 2, 6], "manual": 1, "popsummari": [1, 2], "pip": 1, "ignor": 1, "python": [1, 2, 6], "git": 1, "ligo": [1, 2, 3, 6], "christian": 1, "adamcewicz": 1, "allow": 1, "u": 1, "brute": 1, "forc": 1, "conflict": 1, "version": [1, 6], "next": 1, "releas": [1, 3, 6], "necessari": [1, 3, 4, 6], "reproduct": 1, "well": [1, 2, 3, 6], "retrain": 1, "popul": [1, 2, 6], "obtain": 1, "cd": [1, 2, 4, 6], "download_data_from_zenodo": 1, "sh": 1, "first": [1, 4, 6], "chang": 1, "permiss": 1, "execut": 1, "via": [1, 2, 6], "chmod": 1, "x": 1, "script": [1, 2, 6], "unzip": 1, "input": [1, 2, 3, 6], "directori": [1, 4, 6], "delet": 1, "zip": 1, "page": [2, 3], "detail": [2, 3, 6], "how": 2, "rerun": 2, "binari": [2, 3, 6], "black": 2, "hole": 2, "tradit": 2, "base": 2, "train": [2, 3], "faster": 2, "A": [2, 3], "cuda": [2, 6], "enabl": [2, 6], "environ": [2, 6], "provid": [2, 6], "your": [2, 6], "local": [2, 4], "case": 2, "like": [2, 6], "own": 2, "befor": 2, "proceed": 2, "ll": 2, "pipelin": [2, 6], "prep_inject": 2, "py": [2, 6], "read": 2, "data": [2, 3, 4], "endo3_bbhpop": [2, 6], "t2100113": [2, 6], "v12": [2, 6], "hdf5": [2, 6], "also": 2, "save": [2, 4, 6], "injectiondict_far_1_in_1_bbh": 2, "pickl": [2, 6], "below": [2, 6], "run_standardinject": 2, "initi": 2, "baselin": 2, "likelihood": [2, 6], "population_model": 2, "output_standardinject": 2, "cdf": 2, "convert": 2, "format": [2, 4, 6], "make_popsummary_standardinject": 2, "popsummary_standardinject": 2, "h5": 2, "posterior": 2, "hyperparamet": 2, "probabl": [2, 3, 6], "densiti": 2, "defin": [2, 6], "over": 2, "grid": 2, "more": [2, 4], "info": [2, 4, 6], "load": [2, 6], "handl": [2, 6], "hdf": [2, 6], "dynam": 2, "accomplish": [2, 6], "analog": [2, 6], "run_dynamicinject": 2, "produc": [2, 3], "output_dynamicinject": 2, "make_popsummary_dynamicinject": 2, "popsummary_dynamicinject": 2, "present": 3, "advanc": 3, "virgo": [3, 6], "select": [3, 6], "access": 3, "github": 3, "com": 3, "tcallist": [3, 6], "dataset": 3, "compris": 3, "host": 3, "doi": 3, "10": 3, "5281": 3, "13362691": 3, "In": 3, "paper": [3, 4, 6], "simpl": 3, "compact": [3, 6], "dure": 3, "observ": 3, "given": [3, 6], "successfulli": 3, "detect": [3, 6], "occur": 3, "cours": 3, "oper": 3, "separ": 3, "pdet": 3, "get": [3, 4], "start": [3, 4], "modul": 3, "jupyt": 4, "notebook": 4, "everi": 4, "appear": 4, "regener": 4, "particular": 4, "download": 4, "yourself": 4, "about": 4, "onc": 4, "ve": 4, "launch": 4, "session": 4, "Then": 4, "open": 4, "desir": 4, "ipynb": 4, "all": 4, "cell": 4, "menu": 4, "pdf": 4, "draw_new_inject": 5, "here": 6, "workflow": 6, "endo3_bnspop": 6, "endo3_nsbhpop": 6, "campaign": 6, "were": 6, "kagra": 6, "collabor": 6, "7890437": 6, "training_data": 6, "rpo3": 6, "certain": 6, "hopeless": 6, "meanwhil": 6, "event": 6, "These": 6, "pars": 6, "mark": 6, "miss": 6, "format_training_data": 6, "bbh_training_data": 6, "bbh_validation_data": 6, "reserv": 6, "valid": 6, "purpos": 6, "bns_training_data": 6, "bns_validation_data": 6, "nsbh_training_data": 6, "nsbh_validation_data": 6, "themselv": 6, "downsampl": 6, "concaten": 6, "load_training_data": 6, "util": 6, "automat": 6, "intern": 6, "rest": 6, "flow": 6, "after": 6, "abov": 6, "itself": 6, "run_network_train": 6, "up": 6, "tensorflow": 6, "infrastructur": 6, "postprocess": 6, "diagnost": 6, "It": 6, "command": 6, "line": 6, "outputprefix": 6, "path": 6, "output": 6, "runprefix_": 6, "kei": 6, "11": 6, "argument": 6, "togeth": 6, "prefix": 6, "prepend": 6, "filenam": 6, "second": 6, "integ": 6, "rng": 6, "turn": 6, "associ": 6, "librari": 6, "includ": 6, "experi": 6, "highli": 6, "platform": 6, "etc": 6, "depend": 6, "exact": 6, "As": 6, "ensembl": 6, "best": 6, "straightforward": 6, "task": 6, "manag": 6, "system": 6, "slurm": 6, "exampl": 6, "show": 6, "content": 6, "uchicago": 6, "bin": 6, "bash": 6, "sbatch": 6, "job": 6, "arrai": 6, "account": 6, "kicp": 6, "project": 6, "trained_model": 6, "log": 6, "log_": 6, "a_": 6, "out": 6, "error": 6, "err": 6, "19": 6, "4": 6, "14": 6, "00": 6, "partit": 6, "ntask": 6, "mem": 6, "8g": 6, "echo": 6, "my": 6, "slurm_array_task_id": 6, "store": 6, "output_dir": 6, "mkdir": 6, "append": 6, "form": 6, "output_file_prefix": 6, "job_": 6, "printf": 6, "02d": 6, "home": 6, "take": 6, "few": 6, "hour": 6, "domin": 6, "extra": 6, "penal": 6, "integr": 6, "effici": 6, "text": 6, "l": 6, "outputprefix_bbh_chirp_mass_detector": 6, "jpeg": 6, "outputprefix_bbh_cos_inclin": 6, "outputprefix_bbh_log_d": 6, "outputprefix_bns_chirp_mass_detector": 6, "outputprefix_nsbh_chirp_mass_detector": 6, "outputprefix_input_scal": 6, "outputprefix_k": 6, "json": 6, "outputprefix_weight": 6, "among": 6, "compar": 6, "input_scal": 6, "object": 6, "condit": 6, "k": 6, "summari": 6, "statist": 6, "qualiti": 6, "four": 6, "top": 6, "level": 6, "alt_pop_1": 6, "refer": 6, "three": 6, "trace": 6, "piplin": 6, "last": 6, "plausibli": 6, "astrophys": 6, "within": 6, "sub": 6, "entri": 6, "give": 6, "test": 6, "valu": 6, "between": 6, "recov": 6, "those": 6, "same": 6, "plot": 6, "estim": 6, "uncertainti": 6, "weight": 6, "bias": 6}, "objects": {"": [[0, 0, 0, "-", "draw_new_injections"]], "draw_new_injections": [[0, 1, 1, "", "draw_new_injections"], [0, 1, 1, "", "gen_found_injections"]]}, "objtypes": {"0": "py:module", "1": "py:function"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "function", "Python function"]}, "titleterms": {"draw_new_inject": 0, "modul": [0, 5], "get": 1, "start": 1, "set": 1, "up": 1, "your": 1, "environ": 1, "download": 1, "data": [1, 6], "from": 1, "zenodo": 1, "hierarch": 2, "infer": 2, "1": [2, 6], "prepar": [2, 6], "inject": 2, "2": [2, 6], "standard": 2, "select": 2, "effect": 2, "3": 2, "neural": 2, "network": [2, 6], "welcom": 3, "learn": 3, "p": 3, "det": 3, "": 3, "document": 3, "content": 3, "figur": 4, "gener": 4, "train": 6, "perform": 6}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.viewcode": 1, "sphinx": 58}, "alltitles": {"draw_new_injections module": [[0, "module-draw_new_injections"]], "Getting started": [[1, "getting-started"]], "Setting up your environment": [[1, "setting-up-your-environment"]], "Download data from Zenodo": [[1, "download-data-from-zenodo"]], "Hierarchical Inference": [[2, "hierarchical-inference"]], "1. Preparing injections": [[2, "preparing-injections"]], "2. Standard Selection Effects": [[2, "standard-selection-effects"]], "3. Neural Network Selection Effects": [[2, "neural-network-selection-effects"]], "Welcome to learning-p-det\u2019s documentation!": [[3, "welcome-to-learning-p-det-s-documentation"]], "Contents:": [[3, null]], "Figure generation": [[4, "figure-generation"]], "Modules": [[5, "modules"]], "Training the network": [[6, "training-the-network"]], "1. Preparing training data": [[6, "preparing-training-data"]], "2. Perform training": [[6, "perform-training"]]}, "indexentries": {"draw_new_injections": [[0, "module-draw_new_injections"]], "draw_new_injections() (in module draw_new_injections)": [[0, "draw_new_injections.draw_new_injections"]], "gen_found_injections() (in module draw_new_injections)": [[0, "draw_new_injections.gen_found_injections"]], "module": [[0, "module-draw_new_injections"]]}})