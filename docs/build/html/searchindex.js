Search.setIndex({"docnames": ["diagnostics", "draw_new_injections", "format_training_data", "getting-started", "hierarchical-inference", "index", "making-figures", "modules", "training-the-network"], "filenames": ["diagnostics.rst", "draw_new_injections.rst", "format_training_data.rst", "getting-started.rst", "hierarchical-inference.rst", "index.rst", "making-figures.rst", "modules.rst", "training-the-network.rst"], "titles": ["diagnostics module", "draw_new_injections module", "format_training_data module", "Getting started", "Hierarchical Inference", "Welcome to learning-p-det\u2019s documentation!", "Figure generation", "Modules", "Training the network"], "terms": {"ks_test": 0, "ann": 0, "addderiv": 0, "feature_nam": [0, 1], "input_sc": 0, "ndraw": 0, "reference_data": 0, "population_typ": 0, "output_prefix": 0, "parameters_to_check": 0, "none": 0, "jit": [0, 1], "fals": [0, 1], "sourc": [0, 1, 2, 3, 5, 8], "function": [0, 1, 2, 4, 5, 8], "us": [0, 1, 2, 3, 4, 5, 8], "comput": [0, 3, 4, 8], "k": [0, 8], "test": [0, 8], "statist": [0, 8], "p": [0, 3, 4, 6, 8], "valu": [0, 8], "between": [0, 8], "distribut": [0, 1, 8], "found": [0, 1, 2, 8], "pipelin": [0, 4, 8], "inject": [0, 1, 2, 8], "detect": [0, 2, 5, 8], "predict": [0, 1, 8], "neural": [0, 1, 2, 3, 5, 8], "network": [0, 1, 2, 3, 5], "effect": 0, "wrapper": [0, 2], "draw_new_inject": [0, 7], "gen_found_inject": [0, 1], "run_network_train": [0, 8], "py": [0, 4, 8], "produc": [0, 2, 4, 5], "train": [0, 2, 4, 5], "summari": [0, 8], "plot": [0, 8], "paramet": [0, 1, 2, 4, 5, 8], "tf": [0, 1], "kera": [0, 1], "model": [0, 1, 8], "sequenti": [0, 1], "func": [0, 1], "add": [0, 1, 2], "ani": [0, 1, 6], "necessari": [0, 2, 3, 5, 6, 8], "deriv": [0, 1, 2], "featur": [0, 1], "list": [0, 1, 6, 8], "name": [0, 1, 2, 3, 8], "expect": [0, 1], "sklearn": [0, 1, 8], "preprocess": [0, 1, 8], "standardscal": [0, 1, 8], "scaler": [0, 1], "appli": [0, 1], "befor": [0, 4], "pass": 0, "int": [0, 1], "number": [0, 1, 8], "event": [0, 2, 8], "from": [0, 1, 6, 8], "target": 0, "popul": [0, 3, 4, 8], "str": [0, 2], "filepath": [0, 2], "contain": [0, 1, 2, 3, 4, 6, 8], "against": 0, "which": [0, 1, 2, 3, 4, 5, 8], "compar": [0, 8], "string": [0, 1], "specifi": [0, 1, 8], "draw": [0, 1, 4], "propos": [0, 1], "see": [0, 3, 4, 6, 8], "prefix": [0, 8], "prepend": [0, 8], "save": [0, 2, 4, 6, 8], "jpeg": [0, 8], "file": [0, 2, 3, 4, 6, 8], "perform": [0, 3], "If": [0, 1, 3], "i": [0, 1, 3, 4, 5, 8], "all": [0, 2, 6], "bool": [0, 1], "boolean": 0, "tell": 0, "whether": 0, "place": [0, 1, 2, 3], "tensorflow": [0, 8], "return": [0, 1, 2], "ks_result": 0, "dict": [0, 1], "dictionari": [0, 1, 4, 8], "estim": [0, 8], "effici": [0, 8], "batch_siz": 1, "1000": 1, "min_m1": 1, "2": [1, 3], "0": [1, 3, 8], "max_m1": 1, "100": 1, "alpha_m1": 1, "35": 1, "min_m2": 1, "max_m2": 1, "alpha_m2": 1, "1": [1, 3], "max_a1": 1, "998": 1, "max_a2": 1, "zmax": 1, "9": 1, "kappa": 1, "conditional_mass": 1, "new": [1, 3, 4], "note": [1, 4], "o3b": [1, 2], "ar": [1, 5, 8], "describ": [1, 8], "http": [1, 3, 5, 8], "zenodo": [1, 5, 6, 8], "org": [1, 3, 5, 8], "record": [1, 8], "5546676": 1, "float": 1, "minimum": 1, "frame": [1, 2], "primari": 1, "mass": 1, "maximum": 1, "power": 1, "law": 1, "index": 1, "secondari": 1, "spin": 1, "magnitud": [1, 4], "redshift": 1, "govern": 1, "evolut": 1, "merger": 1, "rate": [1, 4], "true": 1, "normal": 1, "rang": 1, "m1": 1, "follow": [1, 3, 4, 8], "convent": 1, "adopt": 1, "bbh": [1, 8], "result": [1, 3, 4, 5, 8], "reject": 1, "sampl": [1, 4], "enforc": 1, "m2": 1, "bn": [1, 8], "nsbh": [1, 8], "o3": [1, 5], "default": [1, 2], "panda": [1, 2], "datafram": [1, 2], "randomli": [1, 5], "drawn": 1, "compon": 1, "cartesian": 1, "sky": 1, "posit": 1, "orient": 1, "distanc": 1, "time": [1, 8], "p_det_emul": 1, "addderived_func": 1, "ntotal": 1, "pop": 1, "verbos": 1, "gener": [1, 5, 8], "set": [1, 8], "cbc": [1, 2, 8], "label": [1, 2, 8], "accord": 1, "our": [1, 3, 5, 6, 8], "p_det": 1, "emul": [1, 4, 5, 8], "annaverag": 1, "The": [1, 3, 4, 5, 6, 8], "serv": [1, 8], "addit": [1, 2, 3], "requir": [1, 3, 8], "should": 1, "modifi": 1, "correspond": [1, 6], "column": 1, "nativ": 1, "ad": 1, "quantiletransform": 1, "extract": [1, 4], "total": 1, "request": 1, "size": 1, "individu": [1, 8], "batch": [1, 8], "evalu": 1, "each": [1, 2, 8], "class": [1, 8], "document": [1, 4], "user": 1, "inform": [1, 2, 8], "print": [1, 8], "screen": 1, "all_found": 1, "ntrial": 1, "order": [1, 4], "yield": [1, 4], "format_and_save_certain": 2, "hfile": 2, "output": [2, 8], "read": [2, 4], "format": [2, 4, 6, 8], "certain": [2, 8], "dataset": [2, 5], "hdf": [2, 4, 8], "gwdistribut": 2, "reformat": 2, "annot": 2, "data": [2, 4, 5, 6], "format_and_save_hopeless": 2, "hkei": 2, "hopeless": [2, 8], "format_real_injection_data": 2, "script": [2, 3, 4, 8], "load": [2, 4, 8], "prepar": 2, "lvk": 2, "specif": [2, 3, 4, 5, 8], "thi": [2, 3, 4, 5, 6, 8], "some": 2, "quantiti": 2, "impos": 2, "select": [2, 5, 8], "cut": 2, "miss": [2, 8], "process": 2, "mark_detections_certain": 2, "injectiondata": 2, "simpl": [2, 5], "helper": 2, "object": [2, 8], "read_and_annot": 2, "mark_detections_hopeless": 2, "mark": [2, 8], "given": [2, 5, 8], "h5py": 2, "open": [2, 6], "relev": 2, "insid": 2, "To": [3, 6, 8], "make": [3, 6], "easi": 3, "possibl": 3, "reproduc": [3, 5, 6], "figur": [3, 5, 8], "yml": [3, 4, 8], "can": [3, 4, 5, 8], "build": [3, 4], "conda": [3, 4, 6, 8], "packag": 3, "need": [3, 4, 8], "run": [3, 4, 5, 6, 8], "code": [3, 4, 5, 8], "repositori": [3, 8], "do": [3, 8], "step": [3, 4], "sure": [3, 6], "you": [3, 4, 6, 8], "have": [3, 6], "instal": [3, 8], "e": 3, "g": 3, "doc": 3, "io": 3, "en": 3, "latest": 3, "miniconda": 3, "html": 3, "env": 3, "creat": [3, 4, 8], "f": 3, "learn": [3, 4, 6, 8], "det": [3, 4, 6, 8], "activ": [3, 4, 6, 8], "deactiv": 3, "an": [3, 8], "environment_midwai": [3, 4], "similarli": 3, "midwai": 3, "gpu": [3, 4, 8], "compat": [3, 8], "jax": 3, "numpyro": [3, 4], "we": [3, 4, 5, 8], "strongli": [3, 8], "recommend": [3, 8], "when": [3, 4, 8], "hierarch": [3, 5], "infer": [3, 5], "although": [3, 8], "suitabl": 3, "univers": [3, 4], "chicago": [3, 4], "": [3, 4], "midway3": [3, 4, 8], "cluster": [3, 4, 8], "mai": [3, 4], "work": [3, 4, 5, 8], "differ": [3, 8], "resourc": 3, "3": 3, "final": [3, 4, 8], "manual": 3, "popsummari": [3, 4], "pip": 3, "ignor": 3, "python": [3, 4, 8], "git": 3, "ligo": [3, 4, 5, 8], "christian": 3, "adamcewicz": 3, "allow": 3, "u": 3, "brute": 3, "forc": 3, "conflict": 3, "version": [3, 8], "next": 3, "releas": [3, 5, 8], "reproduct": 3, "well": [3, 4, 5, 8], "retrain": 3, "obtain": 3, "cd": [3, 4, 6, 8], "download_data_from_zenodo": 3, "sh": 3, "first": [3, 6, 8], "chang": 3, "permiss": 3, "execut": 3, "via": [3, 4, 8], "chmod": 3, "x": 3, "unzip": 3, "input": [3, 4, 5, 8], "directori": [3, 6, 8], "delet": 3, "zip": 3, "page": [4, 5], "detail": [4, 5, 8], "how": 4, "rerun": 4, "binari": [4, 5, 8], "black": 4, "hole": 4, "tradit": 4, "base": 4, "faster": 4, "A": [4, 5], "cuda": [4, 8], "enabl": [4, 8], "environ": [4, 8], "provid": [4, 8], "your": [4, 8], "local": [4, 6], "case": 4, "like": [4, 8], "own": 4, "proceed": 4, "ll": 4, "prep_inject": 4, "endo3_bbhpop": [4, 8], "t2100113": [4, 8], "v12": [4, 8], "hdf5": [4, 8], "also": 4, "injectiondict_far_1_in_1_bbh": 4, "pickl": [4, 8], "below": [4, 8], "run_standardinject": 4, "initi": 4, "baselin": 4, "likelihood": [4, 8], "population_model": 4, "output_standardinject": 4, "cdf": 4, "convert": 4, "make_popsummary_standardinject": 4, "popsummary_standardinject": 4, "h5": 4, "posterior": 4, "hyperparamet": 4, "probabl": [4, 5, 8], "densiti": 4, "defin": [4, 8], "over": 4, "grid": 4, "more": [4, 6], "info": [4, 6, 8], "handl": [4, 8], "dynam": 4, "accomplish": [4, 8], "analog": [4, 8], "run_dynamicinject": 4, "output_dynamicinject": 4, "make_popsummary_dynamicinject": 4, "popsummary_dynamicinject": 4, "present": 5, "advanc": 5, "virgo": [5, 8], "access": 5, "github": 5, "com": 5, "tcallist": [5, 8], "compris": 5, "host": 5, "doi": 5, "10": 5, "5281": 5, "13362691": 5, "In": 5, "paper": [5, 6, 8], "compact": [5, 8], "dure": 5, "observ": 5, "successfulli": 5, "occur": 5, "cours": 5, "oper": 5, "separ": 5, "pdet": 5, "get": [5, 6], "start": [5, 6], "modul": 5, "jupyt": 6, "notebook": 6, "everi": 6, "appear": 6, "regener": 6, "particular": 6, "download": 6, "yourself": 6, "about": 6, "onc": 6, "ve": 6, "launch": 6, "session": 6, "Then": 6, "desir": 6, "ipynb": 6, "cell": 6, "menu": 6, "pdf": 6, "diagnost": [7, 8], "format_training_data": [7, 8], "here": 8, "workflow": 8, "endo3_bnspop": 8, "endo3_nsbhpop": 8, "campaign": 8, "were": 8, "kagra": 8, "collabor": 8, "7890437": 8, "training_data": 8, "rpo3": 8, "meanwhil": 8, "These": 8, "pars": 8, "bbh_training_data": 8, "bbh_validation_data": 8, "reserv": 8, "valid": 8, "purpos": 8, "bns_training_data": 8, "bns_validation_data": 8, "nsbh_training_data": 8, "nsbh_validation_data": 8, "themselv": 8, "downsampl": 8, "concaten": 8, "load_training_data": 8, "util": 8, "automat": 8, "intern": 8, "rest": 8, "flow": 8, "after": 8, "abov": 8, "itself": 8, "up": 8, "infrastructur": 8, "postprocess": 8, "It": 8, "command": 8, "line": 8, "outputprefix": 8, "path": 8, "runprefix_": 8, "kei": 8, "11": 8, "argument": 8, "togeth": 8, "filenam": 8, "second": 8, "integ": 8, "rng": 8, "turn": 8, "associ": 8, "librari": 8, "includ": 8, "experi": 8, "highli": 8, "platform": 8, "etc": 8, "depend": 8, "exact": 8, "As": 8, "ensembl": 8, "best": 8, "straightforward": 8, "task": 8, "manag": 8, "system": 8, "slurm": 8, "exampl": 8, "show": 8, "content": 8, "uchicago": 8, "bin": 8, "bash": 8, "sbatch": 8, "job": 8, "arrai": 8, "account": 8, "kicp": 8, "project": 8, "trained_model": 8, "log": 8, "log_": 8, "a_": 8, "out": 8, "error": 8, "err": 8, "19": 8, "4": 8, "14": 8, "00": 8, "partit": 8, "ntask": 8, "mem": 8, "8g": 8, "echo": 8, "my": 8, "slurm_array_task_id": 8, "store": 8, "output_dir": 8, "mkdir": 8, "append": 8, "form": 8, "output_file_prefix": 8, "job_": 8, "printf": 8, "02d": 8, "home": 8, "take": 8, "few": 8, "hour": 8, "domin": 8, "extra": 8, "penal": 8, "integr": 8, "text": 8, "l": 8, "outputprefix_bbh_chirp_mass_detector": 8, "outputprefix_bbh_cos_inclin": 8, "outputprefix_bbh_log_d": 8, "outputprefix_bns_chirp_mass_detector": 8, "outputprefix_nsbh_chirp_mass_detector": 8, "outputprefix_input_scal": 8, "outputprefix_k": 8, "json": 8, "outputprefix_weight": 8, "among": 8, "input_scal": 8, "condit": 8, "qualiti": 8, "four": 8, "top": 8, "level": 8, "alt_pop_1": 8, "refer": 8, "three": 8, "trace": 8, "piplin": 8, "last": 8, "plausibli": 8, "astrophys": 8, "within": 8, "sub": 8, "entri": 8, "give": 8, "recov": 8, "those": 8, "same": 8, "uncertainti": 8, "weight": 8, "bias": 8}, "objects": {"": [[0, 0, 0, "-", "diagnostics"], [1, 0, 0, "-", "draw_new_injections"], [2, 0, 0, "-", "format_training_data"]], "diagnostics": [[0, 1, 1, "", "ks_test"]], "draw_new_injections": [[1, 1, 1, "", "draw_new_injections"], [1, 1, 1, "", "gen_found_injections"]], "format_training_data": [[2, 1, 1, "", "format_and_save_certain"], [2, 1, 1, "", "format_and_save_hopeless"], [2, 1, 1, "", "format_real_injection_data"], [2, 1, 1, "", "mark_detections_certain"], [2, 1, 1, "", "mark_detections_hopeless"], [2, 1, 1, "", "read_and_annotate"]]}, "objtypes": {"0": "py:module", "1": "py:function"}, "objnames": {"0": ["py", "module", "Python module"], "1": ["py", "function", "Python function"]}, "titleterms": {"diagnost": 0, "modul": [0, 1, 2, 7], "draw_new_inject": 1, "format_training_data": 2, "get": 3, "start": 3, "set": 3, "up": 3, "your": 3, "environ": 3, "download": 3, "data": [3, 8], "from": 3, "zenodo": 3, "hierarch": 4, "infer": 4, "1": [4, 8], "prepar": [4, 8], "inject": 4, "2": [4, 8], "standard": 4, "select": 4, "effect": 4, "3": 4, "neural": 4, "network": [4, 8], "welcom": 5, "learn": 5, "p": 5, "det": 5, "": 5, "document": 5, "content": 5, "figur": 6, "gener": 6, "train": 8, "perform": 8}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.viewcode": 1, "sphinx": 58}, "alltitles": {"diagnostics module": [[0, "module-diagnostics"]], "draw_new_injections module": [[1, "module-draw_new_injections"]], "format_training_data module": [[2, "module-format_training_data"]], "Getting started": [[3, "getting-started"]], "Setting up your environment": [[3, "setting-up-your-environment"]], "Download data from Zenodo": [[3, "download-data-from-zenodo"]], "Hierarchical Inference": [[4, "hierarchical-inference"]], "1. Preparing injections": [[4, "preparing-injections"]], "2. Standard Selection Effects": [[4, "standard-selection-effects"]], "3. Neural Network Selection Effects": [[4, "neural-network-selection-effects"]], "Welcome to learning-p-det\u2019s documentation!": [[5, "welcome-to-learning-p-det-s-documentation"]], "Contents:": [[5, null]], "Figure generation": [[6, "figure-generation"]], "Modules": [[7, "modules"]], "Training the network": [[8, "training-the-network"]], "1. Preparing training data": [[8, "preparing-training-data"]], "2. Perform training": [[8, "perform-training"]]}, "indexentries": {"diagnostics": [[0, "module-diagnostics"]], "ks_test() (in module diagnostics)": [[0, "diagnostics.ks_test"]], "module": [[0, "module-diagnostics"], [1, "module-draw_new_injections"], [2, "module-format_training_data"]], "draw_new_injections": [[1, "module-draw_new_injections"]], "draw_new_injections() (in module draw_new_injections)": [[1, "draw_new_injections.draw_new_injections"]], "gen_found_injections() (in module draw_new_injections)": [[1, "draw_new_injections.gen_found_injections"]], "format_and_save_certain() (in module format_training_data)": [[2, "format_training_data.format_and_save_certain"]], "format_and_save_hopeless() (in module format_training_data)": [[2, "format_training_data.format_and_save_hopeless"]], "format_real_injection_data() (in module format_training_data)": [[2, "format_training_data.format_real_injection_data"]], "format_training_data": [[2, "module-format_training_data"]], "mark_detections_certain() (in module format_training_data)": [[2, "format_training_data.mark_detections_certain"]], "mark_detections_hopeless() (in module format_training_data)": [[2, "format_training_data.mark_detections_hopeless"]], "read_and_annotate() (in module format_training_data)": [[2, "format_training_data.read_and_annotate"]]}})